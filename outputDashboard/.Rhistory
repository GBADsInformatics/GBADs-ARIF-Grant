select(where(~ all(. %in% c(0, 1)))),
sum,
na.rm = TRUE),
.groups = "drop")
binary_summary <- sample_data %>%
group_by(group1, group2, group3) %>%
summarise(across(where(~ all(. %in% c(0, 1))), sum, na.rm = TRUE),
.groups = "drop")
View(binary_summary)
library(dplyr)
library(tidyr)
library(dplyr)
library(dplyr)
library(tidyr)
sample_data <- data.frame(
group1 = sample(c("Male", "Female"), 100, replace = TRUE),
group2 = sample(c("30", "30-50", "50+"), 100, replace = TRUE),
group3 = sample(c("prog1", "prog2"), 100, replace = TRUE),
education = sample(c("HS", "BSc", "MSc"), 100, replace = TRUE),
location = sample(c("Canada", "USA", "Mexico"), 100, replace = TRUE),
Q1.Yes = sample(c(0, 1), 100, replace = TRUE),
Q1.No = sample(c(0, 1), 100, replace = TRUE),
Q2.Yes = sample(c(0, 1), 100, replace = TRUE),
Q2.No = sample(c(0, 1), 100, replace = TRUE)
)
binary_summary <- sample_data %>%
group_by(group1, group2, group3) %>%
summarise(across(where(~ all(. %in% c(0, 1))), sum, na.rm = TRUE),
.groups = "drop")
View(binary_summary)
sample_data <- data.frame(
group1 = sample(c("Male", "Female"), 100, replace = TRUE),
group2 = sample(c("30", "30-50", "50+"), 100, replace = TRUE),
group3 = sample(c("prog1", "prog2"), 100, replace = TRUE),
education = sample(c("HS", "BSc", "MSc"), 100, replace = TRUE),
location = sample(c("Canada", "USA", "Mexico"), 100, replace = TRUE),
Q1.Yes = sample(c(0, 1, NA), 100, replace = TRUE),
Q1.No = sample(c(0, 1), 100, replace = TRUE),
Q2.Yes = sample(c(0, 1), 100, replace = TRUE),
Q2.No = sample(c(0, 1), 100, replace = TRUE)
)
View(sample_data)
binary_summary <- sample_data %>%
group_by(group1, group2, group3) %>%
summarise(across(where(~ all(. %in% c(0, 1))), sum, na.rm = TRUE),
.groups = "drop")
View(binary_summary)
binary_summary <- sample_data %>%
group_by(group1, group2, group3) %>%
summarise(across(where(~ all(. %in% c(0, 1))), sum, na.rm = FALSE),
.groups = "drop")
View(binary_summary)
binary_summary <- sample_data %>%
group_by(group1, group2, group3) %>%
summarise(across(where(~ all(. %in% c(0, 1, NA))), sum, na.rm = TRUE),
.groups = "drop")
View(binary_summary)
cat_summary <- function(data, col){
temp <- data %>%
group_by(group1, group2, group3, {{col}}) %>%
summarise(count = n(), .groups = "drop") %>%
pivot_wider(names_from = {{col}}, values_from = count, values_fill = list(count = 0))
return(temp)
}
education_summary <- cat_summary(sample_data, education)
location_summary <- cat_summary(sample_data, location)
categorical_summary <- left_join(education_summary, location_summary, by = c("group1", "group2", "group3"))
final_summary <- left_join(binary_summary, categorical_summary, by = c("group1", "group2", "group3"))
View(final_summary)
View(categorical_summary)
temp <- data %>%
group_by(group1, group2, group3, {{col}}) %>%
summarise(count = n(), .groups = "drop") %>%
pivot_wider(names_from = paste({{col}}), values_from = count, values_fill = list(count = 0))
sample_data <- data.frame(
group1 = sample(c("Male", "Female"), 100, replace = TRUE),
group2 = sample(c("30", "30-50", "50+"), 100, replace = TRUE),
group3 = sample(c("prog1", "prog2"), 100, replace = TRUE),
education = sample(c("HS", "BSc", "MSc"), 100, replace = TRUE),
location = sample(c("Canada", "USA", "Mexico"), 100, replace = TRUE),
Q1.Yes = sample(c(0, 1, NA), 100, replace = TRUE),
Q1.No = sample(c(0, 1), 100, replace = TRUE),
Q2.Yes = sample(c(0, 1), 100, replace = TRUE),
Q2.No = sample(c(0, 1), 100, replace = TRUE),
Counts = sample(1:100, 100, replace = TRUE)
)
View(sample_data)
binary_summary <- sample_data %>%
group_by(group1, group2, group3) %>%
summarise(across(where(~ all(. %in% c(0, 1, NA))), sum, na.rm = TRUE),
.groups = "drop")
cat_summary <- function(data, col){
temp <- data %>%
group_by(group1, group2, group3, {{col}}) %>%
summarise(count = n(), .groups = "drop") %>%
pivot_wider(names_from = {{col}}, values_from = count, values_fill = list(count = 0))
return(temp)
}
education_summary <- cat_summary(sample_data, education)
location_summary <- cat_summary(sample_data, location)
count_summary <- function(data, col) {
temp <- data %>%
group_by(group1, group2, group3, {{col}}) %>%
summarise(count = sum({{col}}, na.rm = TRUE), .groups = "drop") %>%
pivot_wider(names_from = {{col}}, values_from = count, values_fill = list(count = 0))
return(temp)
}
sample_data <- data.frame(
group1 = sample(c("Male", "Female"), 100, replace = TRUE),
group2 = sample(c("30", "30-50", "50+"), 100, replace = TRUE),
group3 = sample(c("prog1", "prog2"), 100, replace = TRUE),
education = sample(c("HS", "BSc", "MSc"), 100, replace = TRUE),
location = sample(c("Canada", "USA", "Mexico"), 100, replace = TRUE),
Q1.Yes = sample(c(0, 1, NA), 100, replace = TRUE),
Q1.No = sample(c(0, 1), 100, replace = TRUE),
Q2.Yes = sample(c(0, 1), 100, replace = TRUE),
Q2.No = sample(c(0, 1), 100, replace = TRUE),
People = sample(1:100, 100, replace = TRUE)
)
binary_summary <- sample_data %>%
group_by(group1, group2, group3) %>%
summarise(across(where(~ all(. %in% c(0, 1, NA))), sum, na.rm = TRUE),
.groups = "drop")
cat_summary <- function(data, col){
temp <- data %>%
group_by(group1, group2, group3, {{col}}) %>%
summarise(count = n(), .groups = "drop") %>%
pivot_wider(names_from = {{col}}, values_from = count, values_fill = list(count = 0))
return(temp)
}
education_summary <- cat_summary(sample_data, education)
location_summary <- cat_summary(sample_data, location)
people_summary <-count_summary(data, People)
count_summary <- function(data, col) {
temp <- data %>%
group_by(group1, group2, group3, {{col}}) %>%
summarise(count = sum({{col}}, na.rm = TRUE), .groups = "drop") %>%
pivot_wider(names_from = {{col}}, values_from = count, values_fill = list(count = 0))
return(temp)
}
people_summary <-count_summary(data, People)
count_summary <- function(data, col) {
temp <- data %>%
group_by(group1, group2, group3) %>%
summarise(count = sum({{col}}, na.rm = TRUE), .groups = "drop") %>%
pivot_wider(names_from = "group1", values_from = count, values_fill = list(count = 0))
return(temp)
}
# Run the function for 'People' column
people_summary <- count_summary(sample_data, People)
View(people_summary)
temp <- data %>%
group_by(group1, group2, group3) %>%
summarise(count = sum({{col}}, na.rm = TRUE), .groups = "drop") %>%
pivot_wider(names_from = {{col}}, values_from = count, values_fill = list(count = 0))
return(temp)
count_summary <- function(data, col) {
temp <- data %>%
group_by(group1, group2, group3) %>%
summarise(count = sum({{col}}, na.rm = TRUE), .groups = "drop") %>%
pivot_wider(names_from = group1, values_from = count, values_fill = list(count = 0)) %>%
rename(People = count)  # Rename the count column to "People"
return(temp)
}
# Run the function for 'People' column
people_summary <- count_summary(sample_data, People)
people_summary <- count_summary(sample_data, People)
count_summary <- function(data, col) {
temp <- data %>%
group_by(group1, group2, group3) %>%
summarise(count = sum({{col}}, na.rm = TRUE), .groups = "drop") %>%
pivot_wider(names_from = "group1", values_from = count, values_fill = list(count = 0))
return(temp)
}
people_summary <- count_summary(sample_data, People)
View(people_summary)
temp <- data %>%
group_by(group1, group2, group3) %>%
summarise(count = sum({{col}}, na.rm = TRUE), .groups = "drop")
count_summary <- function(data, col) {
temp <- data %>%
group_by(group1, group2, group3) %>%
summarise(count = sum({{col}}, na.rm = TRUE), .groups = "drop")
return(temp)
}
people_summary <- count_summary(sample_data, People)
View(people_summary)
final_summary <- left_join(binary_summary, categorical_summary, people_summary, by = c("group1", "group2", "group3"))
View(final_summary)
people_summary <- count_summary(sample_data, People)
final_summary <- left_join(binary_summary, categorical_summary, people_summary, by = c("group1", "group2", "group3"))
View(final_summary)
View(people_summary)
temp <- data %>%
group_by(group1, group2, group3) %>%
summarise({{col}} = sum({{col}}, na.rm = TRUE), .groups = "drop")
count_summary <- function(data, col) {
temp <- data %>%
group_by(group1, group2, group3) %>%
summarise({{col}} = sum({{col}}, na.rm = TRUE), .groups = "drop")
people_summary <- count_summary(sample_data, People)
count_summary <- function(data, col) {
temp <- data %>%
group_by(group1, group2, group3) %>%
summarise({{col}} = sum({{col}}, na.rm = TRUE), .groups = "drop")
count_summary <- function(data, col) {
temp <- data %>%
group_by(group1, group2, group3) %>%
summarise({{col}} = sum({{col}}, na.rm = TRUE), .groups = "drop")
# Example usage
people_summary <- count_summary(sample_data, People)
View(people_summary)
temp <- data %>%
group_by(group1, group2, group3) %>%
summarise(count = sum({{col}}, na.rm = TRUE), .groups = "drop") %>%
rename({{col}} = count)
temp <- data %>%
group_by(group1, group2, group3) %>%
summarise(count = sum({{col}}, na.rm = TRUE), .groups = "drop") %>%
rename(paste(col) = count)
count_summary <- function(data, col) {
temp <- data %>%
group_by(group1, group2, group3) %>%
summarise(count = sum({{col}}, na.rm = TRUE), .groups = "drop") %>%
rename(paste(col) = count)
count_summary <- function(data, col) {
temp <- data %>%
group_by(group1, group2, group3) %>%
summarise(count = sum({{col}}, na.rm = TRUE), .groups = "drop") %>%
rename_with(~ as.character(substitute(col)), count)
return(temp)
}
# Example usage
people_summary <- count_summary(sample_data, People)
View(people_summary)
count_summary <- function(data, col) {
temp <- data %>%
group_by(group1, group2, group3) %>%
summarise(count = sum({{col}}, na.rm = TRUE), .groups = "drop") %>%
rename(!!col := count)  # Rename dynamically using the value of `col`
return(temp)
}
# Example usage
people_summary <- count_summary(sample_data, "People")
# Example usage
people_summary <- count_summary(sample_data, People)
count_summary <- function(data, col) {
column_name = paste(col)
temp <- data %>%
group_by(group1, group2, group3) %>%
summarise(count = sum({{col}}, na.rm = TRUE), .groups = "drop") %>%
rename(column_name = count)
return(temp)
}
# Example usage
people_summary <- count_summary(sample_data, People)
temp <- data %>%
group_by(group1, group2, group3) %>%
summarise(count = sum({{col}}, na.rm = TRUE), .groups = "drop") %>%
rename(count = column_name)
count_summary <- function(data, col) {
column_name = paste(col)
temp <- data %>%
group_by(group1, group2, group3) %>%
summarise(count = sum({{col}}, na.rm = TRUE), .groups = "drop") %>%
rename(count = column_name)
return(temp)
}
# Example usage
people_summary <- count_summary(sample_data, People)
count_summary <- function(data, col) {
temp <- data %>%
group_by(group1, group2, group3) %>%
summarise(count = sum({{col}}, na.rm = TRUE), .groups = "drop")
return(temp)
}
# Example usage
people_summary <- count_summary(sample_data, People)
View(people_summary)
final_summary <- left_join(binary_summary, categorical_summary, people_summary, by = c("group1", "group2", "group3"))
View(final_summary)
library(dplyr)
library(tidyr)
sample_data <- data.frame(
group1 = sample(c("Male", "Female"), 100, replace = TRUE),
group2 = sample(c("30", "30-50", "50+"), 100, replace = TRUE),
group3 = sample(c("prog1", "prog2"), 100, replace = TRUE),
education = sample(c("HS", "BSc", "MSc"), 100, replace = TRUE),
location = sample(c("Canada", "USA", "Mexico"), 100, replace = TRUE),
Q1.Yes = sample(c(0, 1, NA), 100, replace = TRUE),
Q1.No = sample(c(0, 1), 100, replace = TRUE),
Q2.Yes = sample(c(0, 1), 100, replace = TRUE),
Q2.No = sample(c(0, 1), 100, replace = TRUE),
People = sample(1:100, 100, replace = TRUE)
)
binary_summary <- sample_data %>%
group_by(group1, group2, group3) %>%
summarise(across(where(~ all(. %in% c(0, 1, NA))), sum, na.rm = TRUE),
.groups = "drop")
cat_summary <- function(data, col){
temp <- data %>%
group_by(group1, group2, group3, {{col}}) %>%
summarise(count = n(), .groups = "drop") %>%
pivot_wider(names_from = {{col}}, values_from = count, values_fill = list(count = 0))
return(temp)
}
education_summary <- cat_summary(sample_data, education)
location_summary <- cat_summary(sample_data, location)
categorical_summary <- left_join(education_summary, location_summary, by = c("group1", "group2", "group3"))
count_summary <- function(data, col) {
temp <- data %>%
group_by(group1, group2, group3) %>%
summarise(count = sum({{col}}, na.rm = TRUE), .groups = "drop")
return(temp)
}
people_summary <- count_summary(sample_data, People)
View(people_summary)
final_summary <- full_join(binary_summary, categorical_summary, people_summary, by = c("group1", "group2", "group3"))
View(final_summary)
final_summary <- binary_summary %>%
full_join(categorical_summary, by = c("group1", "group2", "group3")) %>%
full_join(people_summary, by = c("group1", "group2", "group3"))
View(final_summary)
sample_data <- data.frame(
group1 = sample(c("Male", "Female"), 100, replace = TRUE),
group2 = sample(c("30", "30-50", "50+"), 100, replace = TRUE),
group3 = sample(c("prog1", "prog2"), 100, replace = TRUE),
education = sample(c("HS", "BSc", "MSc"), 100, replace = TRUE),
location = sample(c("Canada", "USA", "Mexico"), 100, replace = TRUE),
Q1.Yes = sample(c(0, 1, NA), 100, replace = TRUE),
Q1.No = sample(c(0, 1), 100, replace = TRUE),
Q2.Yes = sample(c(0, 1), 100, replace = TRUE),
Q2.No = sample(c(0, 1), 100, replace = TRUE),
People = sample(1:100, 100, replace = TRUE)
)
View(sample_data)
binary_summary <- sample_data %>%
group_by(group1, group2, group3) %>%
summarise(across(where(~ all(. %in% c(0, 1, NA))), sum, na.rm = TRUE),
.groups = "drop")
View(binary_summary)
cat_summary <- function(data, col){
temp <- data %>%
group_by(group1, group2, group3, {{col}}) %>%
summarise(count = n(), .groups = "drop") %>%
pivot_wider(names_from = {{col}}, values_from = count, values_fill = list(count = 0))
return(temp)
}
education_summary <- cat_summary(sample_data, education)
location_summary <- cat_summary(sample_data, location)
categorical_summary <- left_join(education_summary, location_summary, by = c("group1", "group2", "group3"))
count_summary <- function(data, col) {
temp <- data %>%
group_by(group1, group2, group3) %>%
summarise(count = sum({{col}}, na.rm = TRUE), .groups = "drop")
return(temp)
}
people_summary <- count_summary(sample_data, People)
View(people_summary)
final_summary <- binary_summary %>%
full_join(categorical_summary, by = c("group1", "group2", "group3")) %>%
full_join(people_summary, by = c("group1", "group2", "group3"))
View(final_summary)
sample_data <- sample_data %>%
filter(group1 == "Male")
binary_summary <- sample_data %>%
group_by(group1, group2, group3) %>%
summarise(across(where(~ all(. %in% c(0, 1, NA))), sum, na.rm = TRUE),
.groups = "drop")
cat_summary <- function(data, col){
temp <- data %>%
group_by(group1, group2, group3, {{col}}) %>%
summarise(count = n(), .groups = "drop") %>%
pivot_wider(names_from = {{col}}, values_from = count, values_fill = list(count = 0))
return(temp)
}
education_summary <- cat_summary(sample_data, education)
location_summary <- cat_summary(sample_data, location)
categorical_summary <- left_join(education_summary, location_summary, by = c("group1", "group2", "group3"))
count_summary <- function(data, col) {
temp <- data %>%
group_by(group1, group2, group3) %>%
summarise(count = sum({{col}}, na.rm = TRUE), .groups = "drop")
return(temp)
}
people_summary <- count_summary(sample_data, People)
final_summary <- binary_summary %>%
full_join(categorical_summary, by = c("group1", "group2", "group3")) %>%
full_join(people_summary, by = c("group1", "group2", "group3"))
View(final_summary)
#Replace with your real data
sample_data <- data.frame(
group1 = sample(c("Male", "Female"), 100, replace = TRUE),
group2 = sample(c("30", "30-50", "50+"), 100, replace = TRUE),
group3 = sample(c("prog1", "prog2"), 100, replace = TRUE),
education = sample(c("HS", "BSc", "MSc"), 100, replace = TRUE),
location = sample(c("Canada", "USA", "Mexico"), 100, replace = TRUE),
Q1.Yes = sample(c(0, 1, NA, 99), 100, replace = TRUE),
Q1.No = sample(c(0, 1), 100, replace = TRUE),
Q2.Yes = sample(c(0, 1), 100, replace = TRUE),
Q2.No = sample(c(0, 1), 100, replace = TRUE),
People = sample(1:100, 100, replace = TRUE)
)
binary_summary <- sample_data %>%
group_by(group1, group2, group3) %>%
summarise(across(where(~ all(. %in% c(0, 1, NA)) & !(. %in% c(99))), sum, na.rm = TRUE),
.groups = "drop")
library(tidyr)
library(dplyr)
binary_summary <- sample_data %>%
group_by(group1, group2, group3) %>%
summarise(across(where(~ all(. %in% c(0, 1, NA)) & !(. %in% c(99))), sum, na.rm = TRUE),
.groups = "drop")
#Replace with your real data
sample_data <- data.frame(
group1 = sample(c("Male", "Female"), 100, replace = TRUE),
group2 = sample(c("30", "30-50", "50+"), 100, replace = TRUE),
group3 = sample(c("prog1", "prog2"), 100, replace = TRUE),
education = sample(c("HS", "BSc", "MSc"), 100, replace = TRUE),
location = sample(c("Canada", "USA", "Mexico"), 100, replace = TRUE),
Q1.Yes = sample(c(0, 1, NA, 99), 100, replace = TRUE),
Q1.No = sample(c(0, 1), 100, replace = TRUE),
Q2.Yes = sample(c(0, 1), 100, replace = TRUE),
Q2.No = sample(c(0, 1), 100, replace = TRUE),
People = sample(1:100, 100, replace = TRUE)
)
#Filtering to a specific group
sample_data <- sample_data %>%
filter(group1 == "Male")
binary_summary <- sample_data %>%
group_by(group1, group2, group3) %>%
summarise(across(where(~ all(. %in% c(0, 1, NA)) & !(. %in% c(99))), sum, na.rm = TRUE),
.groups = "drop")
binary_summary <- sample_data %>%
group_by(group1, group2, group3) %>%
summarise(across(where(~ all(. %in% c(0, 1, NA)) & !any(. %in% c(99)))),
~ sum(. %in% c(0, 1), na.rm = TRUE), .groups = "drop")
binary_summary <- sample_data %>%
group_by(group1, group2, group3) %>%
summarise(across(where(~ all(. %in% c(0, 1, NA)) & !any(. %in% c(99)))),
~ sum(. %in% c(0, 1), na.rm = TRUE), .groups = "drop")
#Replace with your real data
sample_data <- data.frame(
group1 = sample(c("Male", "Female"), 100, replace = TRUE),
group2 = sample(c("30", "30-50", "50+"), 100, replace = TRUE),
group3 = sample(c("prog1", "prog2"), 100, replace = TRUE),
education = sample(c("HS", "BSc", "MSc"), 100, replace = TRUE),
location = sample(c("Canada", "USA", "Mexico"), 100, replace = TRUE),
Q1.Yes = sample(c(0, 1, NA), 100, replace = TRUE),
Q1.No = sample(c(0, 1), 100, replace = TRUE),
Q2.Yes = sample(c(0, 1), 100, replace = TRUE),
Q2.No = sample(c(0, 1), 100, replace = TRUE),
People = sample(1:100, 100, replace = TRUE)
)
binary_summary <- sample_data %>%
group_by(group1, group2, group3) %>%
summarise(across(where(~ all(. %in% c(0, 1, NA))), sum, na.rm = TRUE),
.groups = "drop")
binary_summary <- sample_data %>%
group_by(group1, group2, group3) %>%
summarise(across(where(~ all(. %in% c(0, 1, NA))), sum, na.rm = TRUE),
.groups = "drop")
View(binary_summary)
binary_summary <- sample_data %>%
group_by(group1, group2, group3) %>%
summarise(across(where(~ all(. %in% c(0, 1, NA)) & !any(. %in% c(99)))),
~ sum(. == 1, na.rm = TRUE), .groups = "drop")
binary_summary <- sample_data %>%
group_by(group1, group2, group3) %>%
summarise(across(where(~ all(. %in% c(0, 1, NA)) & !any(. %in% c(99)))),
function(x) sum(x == 1, na.rm = TRUE), .groups = "drop")
binary_summary <- sample_data %>%
group_by(group1, group2, group3) %>%
summarise(across(where(~ all(. %in% c(0, 1, NA)) & !any(. %in% c(99)))),
~ sum(. == 1, na.rm = TRUE), .groups = "drop")
binary_summary <- sample_data %>%
group_by(group1, group2, group3) %>%
summarise(across(where(~ all(. %in% c(0, 1, NA)) & !any(. %in% c(99)))),
~ sum(. == 1, na.rm = TRUE), .groups = "drop")
binary_summary <- sample_data %>%
group_by(group1, group2, group3) %>%
summarise(across(
where(~ all(. %in% c(0, 1, NA)) & !any(. %in% c(99))),
~ sum(. == 1, na.rm = TRUE),
.groups = "drop"
))
binary_summary <- sample_data %>%
# Identify columns with only 0, 1, and NA, excluding 99
select(where(~ all(. %in% c(0, 1, NA)) & !any(. %in% c(99)))) %>%
# Remove 99s from the selected columns (by replacing them with NA)
mutate(across(everything(), ~ na_if(., 99))) %>%
# Group by group1, group2, and group3, then summarize by summing the 1s
group_by(group1, group2, group3) %>%
summarise(across(everything(), ~ sum(. == 1, na.rm = TRUE), .groups = "drop"))
binary_summary <- sample_data %>%
select(where(~ all(. %in% c(0, 1, NA)) & !any(. %in% c(99)))) %>%
mutate(across(everything(), ~ na_if(., 99))) %>%
group_by(group1, group2, group3) %>%
summarise(across(everything(), ~ sum(. == 1, na.rm = TRUE), .groups = "drop"))
library(arrow_
library(arrow)
data <-file.choose()
install.packages("paws")
library(paws)
library(paws)
library(paws.storage
)
library(paws.storage)
detach("package:paws.storage", unload = TRUE)
shiny::runApp('Git/companion_animal_amr/AMRVisualizerV2/AMRDataVisualizer')
runApp('Git/GBADs ARIF DPM Dashboard/accountPortal')
runApp('Git/GBADs ARIF DPM Dashboard/outputDashboard')
